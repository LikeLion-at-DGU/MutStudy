{% extends 'base.html' %}
{% load static %}

{% block content %}
<section>
    <h1>스터디명 : {{post.name}}</h1>
    작성자: {{post.writer}}<br>
    스터디 분야: {{post.section}}<br>
    한줄 소개: {{post.intro}}<br>
    모집 대상: {{post.qualification}}<br>
    스터디 모집 인원: {{post.member_start}} ~ {{post.member_end}}<br>
    활동 기간: {{post.start_date}} ~ {{post.due_date}}<br>
    스터디 정보: {{post.body}}<br>
    스터디 난이도: {{post.difficulty}}<br>
    스터디장 번호: {{post.phnum}}<br>
    {%if post.image%}
        관련 이미지: {{post.image}}<br>
    {%endif%}
    {%if is_author%}
        {%if post.study_member_request%}
            {%for member in post.study_member_request.all%}
                {{member}}
                <a href="{% url 'study:accept_request' post.id member.id %}">수락</a>
                <a href="{% url 'study:refuse_request' post.id member.id %}">거절</a><br>
            {%endfor%}
        {%else%}
            <strong>지원자 아직 없음!</strong><br>
        {%endif%}
    {%else%}
        {%if request.user in post.study_member.all%}
            <strong>해당 스터디에 가입돼 있습니다!</strong>
        {%elif request.user in post.study_member_request.all%}
            <strong>승인 대기 중입니다.</strong>
            <a href="{% url 'study:apply_study' post.id %}">지원취소</a><br>
        {%elif request.user.is_authenticated %}
            <a href="{% url 'study:apply_study' post.id %}">지원하기</a><br>
        {%endif%}
    {%endif%}

    {%if request.user in post.study_member.all%}
        현재 가입 멤버들:
        {%for mem in post.study_member.all%}
            {{mem}}
        {%endfor%}
    {%endif%}
    <br>
    {%if is_author%}
        <a href="{% url 'study:edit' post.id %}">수정하기</a>
        <a href="{% url 'study:delete' post.id %}">삭제하기</a>
    {%endif%}
</section>
{% endblock %}

